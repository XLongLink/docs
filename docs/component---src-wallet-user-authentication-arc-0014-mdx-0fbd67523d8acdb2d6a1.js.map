{"version":3,"sources":["webpack:///../src/Wallet/User authentication (ARC-0014).mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","type","variant","parentName","isMDXComponent"],"mappings":"iSASaA,EAAe,Q,qPAC5B,IAAMC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,iBACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAI5E,YAAC,IAAD,CAAMC,KAAK,UAAUC,QAAQ,QAAQF,QAAQ,QAA7C,6BAGA,kBACE,GAAM,gCADR,kCAGA,ghCAcA,iVAKA,uBAAK,oBAAMG,WAAW,MAClB,UAAa,gBADZ,uDAKL,qIAEA,uBAAK,oBAAMA,WAAW,MAClB,UAAa,gBADZ,kDAIL,gZAMA,uBAAK,oBAAMA,WAAW,MAClB,UAAa,gBADZ,0CAIL,2mBASA,uBAAK,oBAAMA,WAAW,MAClB,UAAa,gBADZ,2CAKL,2UAKA,uBAAK,oBAAMA,WAAW,MAClB,UAAa,gBADZ,kBAIL,8cAMA,qCAAoB,iBAAGA,WAAW,IAC9B,KAAQ,0DADQ,iE,mPAOxBN,EAAWO,gBAAiB","file":"component---src-wallet-user-authentication-arc-0014-mdx-0fbd67523d8acdb2d6a1.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"C:/Users/nano2/Documents/GitHub/docs/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nimport { Hint } from '@nejcm/docz-theme-extended';\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <Hint type=\"warning\" variant=\"outer\" mdxType=\"Hint\">\n    Warning: proof of concept\n    </Hint>\n    <h1 {...{\n      \"id\": \"user-authentication-arc-0014\"\n    }}>{`User authentication (ARC-0014)`}</h1>\n    <p>{`Sebbene i wallet hanno un sistema di connessione differente, la struttura di\nautenticazione sarà simile in tutti i casi.\nCome precisato nella lunga descrizione in ARC-0014, l’autenticazione dell’utente\navviene in 2 passaggi. La prima si tratta di un login al proprio wallet tramite il\nprotocollo walletconnect. La seconda è un autenticazione tramite la firma di una\ntransazione nulla che non verrà eseguita dal network. L’hash della transazione serve\nad autenticare che l’utente dispone della chiave privata, infatti grazie alla\ncombinazione della chiave pubblica e dell’hash della transazione è  possibile\nconfermare che l’utente dispone della chiave privata con cui è stata firmata la\ntransazione e quindi proprietario dell’account.\nL’hash della transazione (token) viene successivamente inviato a LLS che controlla\nl’autenticità del token e lo converte in Json Web Token (JWT), che verrà usato in ogni\nrichiesta HTTP autenticare l’utente.\nIl seguente schema mostra il procedimento di autenticazione:`}</p>\n    <p>{`Ogni token avrà una durata limitata, ogni LLS avrà un valore predefinito di durata che\nè possibile modificare nella dashboard del sito.\nLL chiamerà un endpoint nel LLS in modo automatico per sapere la durata del token.\nÈ possibile verificare in qualsiasi momento se un utente è loggato o autenticato\ntramite:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`ll.isLogged: boolean\nll.isAuthenticate: boolean\n`}</code></pre>\n    <p>{`Inoltre le seguenti funzioni verranno utilizzate per loggare ed autenticare l’utente:\nPer loggare l’utente:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`ll.login(showQRCode: boolean, net: NetName)\n`}</code></pre>\n    <p>{`Una volta chiamata, la funzione crea una sessione di walletconnect. Nel caso in cui\n“openQRCode” sia true (default) e si stia utilizzando js in un browser, verrà aperto\nun popup con il qr code, altrimenti verrà loggato in console l’uri di walletconnect.\nÈ possibile indicare il tipo di rete in cui si vuole connettere: Mainnet, Betanet,\nTestnet\nPer autenticare l'utente:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`ll.authenticate(openPopup: boolean)\n`}</code></pre>\n    <p>{`In modo simile alla funzione di login, nel caso di un browser verrà aperto un popup\ncon le informazioni, altrimenti verranno loggate in console.\nLa funzione manderà una richiesta di transazione al wallet, la transazione avrà 0 fee\ne quindi rifiutata dalla blockchain. L’utente verrà informato tramite il popup sul\nperché deve firmare la transazione. Nel popup verrà avvisato l’utente di controllare\nche la transazione che sta firmando riguarda l’applicazione in uso.\nToken:\nIl token verrà salvato nel localstorage con la key “authtoken”, è possibile accedere\nal token ed al JWT tramite:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`ll.token: string\nll.jwtoken: string\n`}</code></pre>\n    <p>{`ma in più dei casi LL gestirà il token nelle richiesta api direttamente e quindi non\nè necessario passarlo manualmente.\nNota: le proprietà di un token JWT permettono al developer di creare un altro server\nper eventuali necessità e di controllare l’autenticità dell’utente in modo immediato.\nDisconnect:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`ll.logout()\n`}</code></pre>\n    <p>{`disconnette l’utente, termina la sessione di walletconnect, nel caso in cui\nll.linkTokenWc sia true, il token ed il JWT verranno cancellati dal localstorage e\nsarà necessario effettuare un'autenticazione nuovamente. È possibile settare\nlinkTokenWc come le altre opzione dalla dashboard della propria applicatione.\nUlteriori modifiche possono essere effettuate a dipendenza delle necessità della\ncommunity e per problemi di sicurezza`}</p>\n    <p>{`Spiegazione: `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/algorandfoundation/ARCs/pull/84/fil\"\n      }}>{`https://github.com/algorandfoundation/ARCs/pull/84/fil`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}